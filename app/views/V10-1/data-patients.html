{% set data = [{"id":"0001","name":"Aaliyah Farah Abbas","nhsNo":"805 422 3165","placeOfDeath":"Community","dateOfDeath":"10 April 2024","status":0,"lastNameFirst":"Abbas, Aaliyah Farah","belongsToAP":true,"belongsToME":false},{"id":"0002","name":"Adrian Dickson","nhsNo":"346 626 9701","placeOfDeath":"Community<br>ME cert","dateOfDeath":"11 April 2024","status":3,"lastNameFirst":"Dickson, Adrian","belongsToAP":false,"belongsToME":false},{"id":"0003","name":"Amelia Brown","nhsNo":"136 547 435","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":1,"lastNameFirst":"Brown, Amelia","belongsToAP":false,"belongsToME":true},{"id":"0004","name":"Andrea Bartlett","nhsNo":"513 223 314","placeOfDeath":"Community","dateOfDeath":"13 April 2024","status":1,"lastNameFirst":"Bartlett, Andrea","belongsToAP":true,"belongsToME":false},{"id":"0005","name":"Andrea Bishop","nhsNo":"848 967 3363","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":2,"lastNameFirst":"Bishop, Andrea","belongsToAP":false,"belongsToME":false},{"id":"0006","name":"Angel Hewitt","nhsNo":"257 173 5715","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":3,"lastNameFirst":"Hewitt, Angel","belongsToAP":false,"belongsToME":false},{"id":"0007","name":"Armaan Chang","nhsNo":"948 891 0502","placeOfDeath":"Community","dateOfDeath":"13 April 2024","status":5,"lastNameFirst":"Chang, Armaan","belongsToAP":false,"belongsToME":false},{"id":"0008","name":"Brogan Hali Bowers","nhsNo":"870 489 8632","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":4,"lastNameFirst":"Bowers, Brogan Hali","belongsToAP":false,"belongsToME":false},{"id":"0009","name":"Caleb Greenaway","nhsNo":"300 480 0732","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":4,"lastNameFirst":"Greenaway, Caleb","belongsToAP":true,"belongsToME":false},{"id":"0010","name":"Charley Angeli Frost","nhsNo":"717 293 9356","placeOfDeath":"Community","dateOfDeath":"10 April 2024","status":4,"lastNameFirst":"Frost, Charley Angeli","belongsToAP":false,"belongsToME":false},{"id":"0011","name":"Charlie Endo Tran","nhsNo":"171 924 8583","placeOfDeath":"Community","dateOfDeath":"13 April 2024","status":1,"lastNameFirst":"Tran, Charlie Endo","belongsToAP":false,"belongsToME":true},{"id":"0012","name":"Cian Yates","nhsNo":"506 934 1527","placeOfDeath":"Community","dateOfDeath":"10 April 2024","status":3,"lastNameFirst":"Yates, Cian","belongsToAP":false,"belongsToME":false},{"id":"0013","name":"Darcey Rowe","nhsNo":"585 732 2174","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":0,"lastNameFirst":"Rowe, Darcey","belongsToAP":false,"belongsToME":true},{"id":"0014","name":"Devon Barlow","nhsNo":"234 024 7268","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":5,"lastNameFirst":"Barlow, Devon","belongsToAP":false,"belongsToME":true},{"id":"0015","name":"Dillan Jhorrad Khan","nhsNo":"818 478 2107","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":4,"lastNameFirst":"Khan, Dillan Jhorrad","belongsToAP":false,"belongsToME":false},{"id":"0016","name":"Dillon Norman","nhsNo":"409 356 8605","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":1,"lastNameFirst":"Norman, Dillon","belongsToAP":false,"belongsToME":false},{"id":"0017","name":"Ebony Austin","nhsNo":"213 754 8873","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":1,"lastNameFirst":"Austin, Ebony","belongsToAP":false,"belongsToME":false},{"id":"0018","name":"Elena Domenica Hunt","nhsNo":"618 164 9302","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":0,"lastNameFirst":"Hunt, Elena Domenica","belongsToAP":false,"belongsToME":true},{"id":"0019","name":"Erik Hendin","nhsNo":"118 192 6597","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":5,"lastNameFirst":"Hendin, Erik","belongsToAP":false,"belongsToME":false},{"id":"0020","name":"Erin Potts","nhsNo":"915 066 9597","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":1,"lastNameFirst":"Potts, Erin","belongsToAP":false,"belongsToME":false},{"id":"0021","name":"Faith Wiggins","nhsNo":"750 606 7482","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":2,"lastNameFirst":"Wiggins, Faith","belongsToAP":false,"belongsToME":false},{"id":"0022","name":"Felix Ashley Ware","nhsNo":"504 165 6644","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":5,"lastNameFirst":"Ware, Felix Ashley","belongsToAP":false,"belongsToME":true},{"id":"0023","name":"Harris Bowman","nhsNo":"603 637 6027","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":1,"lastNameFirst":"Bowman, Harris","belongsToAP":false,"belongsToME":true},{"id":"0024","name":"Idris Felba","nhsNo":"545 520 9332","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":5,"lastNameFirst":"Felba, Idris","belongsToAP":true,"belongsToME":false},{"id":"0025","name":"Jenna Kirk","nhsNo":"516 234 2411","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":3,"lastNameFirst":"Kirk, Jenna","belongsToAP":false,"belongsToME":false},{"id":"0026","name":"Jerry Sherman","nhsNo":"470 467 8096","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":1,"lastNameFirst":"Sherman, Jerry","belongsToAP":false,"belongsToME":true},{"id":"0027","name":"Jordan Carrillo","nhsNo":"694 123 4327","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":3,"lastNameFirst":"Carrillo, Jordan","belongsToAP":false,"belongsToME":false},{"id":"0028","name":"Joseph William Doyle","nhsNo":"607 193 5550","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":2,"lastNameFirst":"Doyle, Joseph William","belongsToAP":false,"belongsToME":false},{"id":"0029","name":"Jude Perry","nhsNo":"363 077 8677","placeOfDeath":"Community","dateOfDeath":"10 April 2024","status":4,"lastNameFirst":"Perry, Jude","belongsToAP":true,"belongsToME":false},{"id":"0030","name":"Julia Graham","nhsNo":"741 971 2239","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":2,"lastNameFirst":"Graham, Julia","belongsToAP":false,"belongsToME":false},{"id":"0031","name":"Kaya Hoffman","nhsNo":"848 303 1213","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":4,"lastNameFirst":"Hoffman, Kaya","belongsToAP":true,"belongsToME":false},{"id":"0032","name":"Kia Ravi","nhsNo":"583 143 720","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":3,"lastNameFirst":"Ravi, Kia","belongsToAP":true,"belongsToME":false},{"id":"0033","name":"Kristen Chandler","nhsNo":"412 278 9333","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":5,"lastNameFirst":"Chandler, Kristen","belongsToAP":false,"belongsToME":false},{"id":"0034","name":"Kyan Mcguire","nhsNo":"514 192 2146","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":4,"lastNameFirst":"Mcguire, Kyan","belongsToAP":false,"belongsToME":false},{"id":"0035","name":"Lachlan Rosario","nhsNo":"252 544 5463","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":4,"lastNameFirst":"Rosario, Lachlan","belongsToAP":false,"belongsToME":false},{"id":"0036","name":"Laurie Boyd","nhsNo":"266 874 2740","placeOfDeath":"Community","dateOfDeath":"13 April 2024","status":5,"lastNameFirst":"Boyd, Laurie","belongsToAP":false,"belongsToME":false},{"id":"0037","name":"Lea Donna Durham","nhsNo":"796 644 9894","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":2,"lastNameFirst":"Durham, Lea Donna","belongsToAP":false,"belongsToME":false},{"id":"0038","name":"Louie O'Quinn","nhsNo":"290 659 4228","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":4,"lastNameFirst":"O'Quinn, Louie","belongsToAP":false,"belongsToME":true},{"id":"0039","name":"Mackenzie Howard","nhsNo":"723 533 4049","placeOfDeath":"Community","dateOfDeath":"10 April 2024","status":3,"lastNameFirst":"Howard, Mackenzie","belongsToAP":true,"belongsToME":false},{"id":"0040","name":"Maddison Juarez","nhsNo":"400 629 1251","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":2,"lastNameFirst":"Juarez, Maddison","belongsToAP":false,"belongsToME":true},{"id":"0041","name":"Mae Alexander","nhsNo":"779 223 6877","placeOfDeath":"Community","dateOfDeath":"10 April 2024","status":0,"lastNameFirst":"Alexander, Mae","belongsToAP":false,"belongsToME":false},{"id":"0042","name":"Malik Sloan","nhsNo":"773 932 3841","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":4,"lastNameFirst":"Sloan, Malik","belongsToAP":true,"belongsToME":false},{"id":"0043","name":"Marissa Guerrero","nhsNo":"439 316 1505","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":4,"lastNameFirst":"Guerrero, Marissa","belongsToAP":false,"belongsToME":false},{"id":"0044","name":"Marley Myers","nhsNo":"106 390 1355","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":2,"lastNameFirst":"Myers, Marley","belongsToAP":false,"belongsToME":false},{"id":"0045","name":"Mika Low","nhsNo":"391 535 3564","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":1,"lastNameFirst":"Low, Mika","belongsToAP":false,"belongsToME":true},{"id":"0046","name":"Milo Brett","nhsNo":"230 239 9727","placeOfDeath":"Community","dateOfDeath":"10 April 2024","status":1,"lastNameFirst":"Brett, Milo","belongsToAP":false,"belongsToME":true},{"id":"0047","name":"Mina Wu","nhsNo":"391 272 3462","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":1,"lastNameFirst":"Wu, Mina","belongsToAP":false,"belongsToME":false},{"id":"0048","name":"Minato Semaj","nhsNo":"430 730 5269","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":4,"lastNameFirst":"Semaj, Minato","belongsToAP":false,"belongsToME":false},{"id":"0049","name":"Molly Knowles","nhsNo":"879 895 2845","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":2,"lastNameFirst":"Knowles, Molly","belongsToAP":true,"belongsToME":false},{"id":"0050","name":"Myra Jari Adkins","nhsNo":"914 178 671","placeOfDeath":"Community","dateOfDeath":"10 April 2024","status":3,"lastNameFirst":"Adkins, Myra Jari","belongsToAP":false,"belongsToME":false},{"id":"0051","name":"Nana Bullock","nhsNo":"664 655 7118","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":0,"lastNameFirst":"Bullock, Nana","belongsToAP":true,"belongsToME":false},{"id":"0052","name":"Pearl Small","nhsNo":"959 389 700","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":2,"lastNameFirst":"Small, Pearl","belongsToAP":false,"belongsToME":true},{"id":"0053","name":"Riley James","nhsNo":"579 353 8562","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":3,"lastNameFirst":"James, Riley","belongsToAP":false,"belongsToME":true},{"id":"0054","name":"Rory Vaughn","nhsNo":"264 940 7202","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":1,"lastNameFirst":"Vaughn, Rory","belongsToAP":false,"belongsToME":false},{"id":"0055","name":"Sasha Castro","nhsNo":"888 066 2089","placeOfDeath":"Community","dateOfDeath":"11 April 2024","status":5,"lastNameFirst":"Castro, Sasha","belongsToAP":false,"belongsToME":false},{"id":"0056","name":"Shannon Ferrell","nhsNo":"580 918 6613","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":3,"lastNameFirst":"Ferrell, Shannon","belongsToAP":false,"belongsToME":true},{"id":"0057","name":"Sienna Mcdonald","nhsNo":"700 486 9010","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":2,"lastNameFirst":"Mcdonald, Sienna","belongsToAP":true,"belongsToME":false},{"id":"0058","name":"Taylor Marshall","nhsNo":"148 847 0566","placeOfDeath":"Community","dateOfDeath":"10 April 2024","status":3,"lastNameFirst":"Marshall, Taylor","belongsToAP":false,"belongsToME":false},{"id":"0059","name":"Verity Duncann","nhsNo":"924 043 2404","placeOfDeath":"Community","dateOfDeath":"12 April 2024","status":5,"lastNameFirst":"Duncann, Verity","belongsToAP":true,"belongsToME":false}] %}
{% extends "layouts/main.html" %}

{% block pageTitle %}
Patient data
{% endblock %}

{% block content %}

<div class="govuk-grid-row">

  <div class="govuk-grid-column-two-thirds govuk-!-margin-top-8">

    <div class="govuk-form-group">
      <h1 class="govuk-label-wrapper">
        <label class="govuk-label govuk-label--l" for="patient-data">
          Patient data
        </label>
      </h1>
      <div id="patient-data-hint" class="govuk-hint">
        Information stored in the variable "data", passed to the <a href="dashboard">dashboard</a> page.
      </div>
      <textarea class="govuk-textarea" id="patient-data" name="moreDetail" rows="5" aria-describedby="patient-data-hint">{{ data | dump }}</textarea>
    </div>

  </div>

</div>


<script>



  document.addEventListener('DOMContentLoaded', function () {

    //
    // PLEASE NOTE:
    // This code take the data from above and modifies it, outputting the result into
    // the textarea shown when you view the page. It is used to tweak stuff (like the dates) 
    // for testing
    //
    // If you want to update the data, you can copy/pase from the textarea into the first line above 
    //

    const textArea = document.querySelector('#patient-data');
    const json = JSON.parse(textArea.innerHTML);

    const _generateNHSNumber = function () {

      let randomNumber = Math.floor(Math.random() * 10000000000);
      let numberString = randomNumber.toString();
      numberString = numberString.slice(0, 3) + ' ' + numberString.slice(3, 6) + ' ' + numberString.slice(6);

      return numberString;
    }

    // Update the data
    /*
    json.forEach(function (row) {

      const currentDates = ['10 April 2024', '11 April 2024', '12 April 2024', '13 April 2024'];

      // Feel free to uncomment these if you want to regenerate stuff, like dates, statuses etc...

      //row.nhsNo = _generateNHSNumber();
      //row.status = Math.round(Math.random()*5); // Should generate a random number between 0-5
      row.dateOfDeath = currentDates[Math.round(Math.random()*(currentDates.length-1))];

      let nameArr = ( row.name ) ? row.name.split(' ') : ['First','Last'];
      nameArr.unshift(nameArr.pop());

      row.lastNameFirst = nameArr[0];
      nameArr.shift();

      row.lastNameFirst += ', ' + nameArr.join(' ');

      row.belongsToAP = ( Math.round(Math.random()*3) === 0 ) ? true : false;
      row.belongsToME = ( row.belongsToAP === false && Math.round(Math.random()*2) === 0 ) ? true : false;

      delete row.statuses;
      delete row.actions;

    });

    textArea.innerHTML = JSON.stringify(json);
    */
    

  });
</script>


{% endblock %}