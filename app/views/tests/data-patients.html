{% set data = [{"id":"0001","name":"Aaliyah Farah Abbas","nhsNo":"935 421 582","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":2},{"id":"0002","name":"Adrian Dickson","nhsNo":"218 823 7683","placeOfDeath":"Community<br>ME cert","dateOfDeath":"28 March 2023","status":4},{"id":"0003","name":"Amelia Brown","nhsNo":"897 186 1936","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":4},{"id":"0004","name":"Andrea Bartlett","nhsNo":"991 243 0699","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":2},{"id":"0005","name":"Andrea Bishop","nhsNo":"729 344 4737","placeOfDeath":"Community","dateOfDeath":"29 March 2023","status":2},{"id":"0006","name":"Angel Hewitt","nhsNo":"744 100 6842","placeOfDeath":"Community","dateOfDeath":"29 March 2023","status":5},{"id":"0007","name":"Armaan Chang","nhsNo":"314 689 1089","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":4},{"id":"0008","name":"Brogan Hali Bowers","nhsNo":"969 927 1996","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":3},{"id":"0009","name":"Caleb Greenaway","nhsNo":"249 786 1205","placeOfDeath":"Community","dateOfDeath":"26 March 2023","status":5},{"id":"0010","name":"Charley Angeli Frost","nhsNo":"777 739 9757","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":4},{"id":"0011","name":"Charlie Endo Tran","nhsNo":"829 258 7183","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":3},{"id":"0012","name":"Cian Yates","nhsNo":"208 236 4400","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":3},{"id":"0013","name":"Darcey Rowe","nhsNo":"374 948 4530","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":3},{"id":"0014","name":"Devon Barlow","nhsNo":"773 213 1102","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":2},{"id":"0015","name":"Dillan Jhorrad Khan","nhsNo":"178 347 6573","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":5},{"id":"0016","name":"Dillon Norman","nhsNo":"601 792 9631","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":5},{"id":"0017","name":"Ebony Austin","nhsNo":"858 842 791","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":2},{"id":"0018","name":"Elena Domenica Hunt","nhsNo":"243 546 9867","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":2},{"id":"0019","name":"Erik Hendin","nhsNo":"592 379 6172","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":1},{"id":"0020","name":"Erin Potts","nhsNo":"970 464 9801","placeOfDeath":"Community","dateOfDeath":"29 March 2023","status":1},{"id":"0021","name":"Faith Wiggins","nhsNo":"510 016 912","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":2},{"id":"0022","name":"Felix Ashley Ware","nhsNo":"686 730 2999","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":0},{"id":"0023","name":"Harris Bowman","nhsNo":"719 032 5440","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":2},{"id":"0024","name":"Idris Felba","nhsNo":"442 545 0479","placeOfDeath":"Community","dateOfDeath":"29 March 2023","status":4},{"id":"0025","name":"Jenna Kirk","nhsNo":"216 191 4766","placeOfDeath":"Community","dateOfDeath":"26 March 2023","status":1},{"id":"0026","name":"Jerry Sherman","nhsNo":"379 700 1417","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":0},{"id":"0027","name":"Jordan Carrillo","nhsNo":"813 431 9093","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":2},{"id":"0028","name":"Joseph William Doyle","nhsNo":"943 082 7807","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":1},{"id":"0029","name":"Jude Perry","nhsNo":"176 501 0701","placeOfDeath":"Community","dateOfDeath":"26 March 2023","status":1},{"id":"0030","name":"Julia Graham","nhsNo":"489 972 4164","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":1},{"id":"0031","name":"Kaya Hoffman","nhsNo":"923 853 1475","placeOfDeath":"Community","dateOfDeath":"26 March 2023","status":4},{"id":"0032","name":"Kia Ravi","nhsNo":"532 592 6145","placeOfDeath":"Community","dateOfDeath":"26 March 2023","status":4},{"id":"0033","name":"Kristen Chandler","nhsNo":"709 341 4702","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":2},{"id":"0034","name":"Kyan Mcguire","nhsNo":"554 070 2811","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":3},{"id":"0035","name":"Lachlan Rosario","nhsNo":"329 464 2768","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":4},{"id":"0036","name":"Laurie Boyd","nhsNo":"408 503 4228","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":1},{"id":"0037","name":"Lea Donna Durham","nhsNo":"318 281 6143","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":3},{"id":"0038","name":"Louie O'Quinn","nhsNo":"188 353 4995","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":1},{"id":"0039","name":"Mackenzie Howard","nhsNo":"865 441 2544","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":2},{"id":"0040","name":"Maddison Juarez","nhsNo":"440 057 314","placeOfDeath":"Community","dateOfDeath":"29 March 2023","status":4},{"id":"0041","name":"Mae Alexander","nhsNo":"247 276 6464","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":1},{"id":"0042","name":"Malik Sloan","nhsNo":"686 098 3286","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":2},{"id":"0043","name":"Marissa Guerrero","nhsNo":"508 636 4444","placeOfDeath":"Community","dateOfDeath":"29 March 2023","status":5},{"id":"0044","name":"Marley Myers","nhsNo":"414 674 4891","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":4},{"id":"0045","name":"Mika Low","nhsNo":"943 087 4051","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":4},{"id":"0046","name":"Milo Brett","nhsNo":"460 492 5013","placeOfDeath":"Community","dateOfDeath":"29 March 2023","status":3},{"id":"0047","name":"Mina Wu","nhsNo":"583 581 5733","placeOfDeath":"Community","dateOfDeath":"26 March 2023","status":1},{"id":"0048","name":"Minato Semaj","nhsNo":"757 937 7120","placeOfDeath":"Community","dateOfDeath":"26 March 2023","status":4},{"id":"0049","name":"Molly Knowles","nhsNo":"353 636 1524","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":5},{"id":"0050","name":"Myra Jari Adkins","nhsNo":"125 748 9540","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":2},{"id":"0051","name":"Nana Bullock","nhsNo":"656 828 0930","placeOfDeath":"Community","dateOfDeath":"26 March 2023","status":1},{"id":"0052","name":"Pearl Small","nhsNo":"954 978 7091","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":1},{"id":"0053","name":"Riley James","nhsNo":"928 314 1533","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":3},{"id":"0054","name":"Rory Vaughn","nhsNo":"970 525 4133","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":4},{"id":"0055","name":"Sasha Castro","nhsNo":"438 158 5787","placeOfDeath":"Community","dateOfDeath":"28 March 2023","status":3},{"id":"0056","name":"Shannon Ferrell","nhsNo":"538 643 3928","placeOfDeath":"Community","dateOfDeath":"26 March 2023","status":2},{"id":"0057","name":"Sienna Mcdonald","nhsNo":"356 035 7040","placeOfDeath":"Community","dateOfDeath":"29 March 2023","status":3},{"id":"0058","name":"Taylor Marshall","nhsNo":"142 034 4938","placeOfDeath":"Community","dateOfDeath":"27 March 2023","status":3},{"id":"0059","name":"Verity Duncann","nhsNo":"312 447 3395","placeOfDeath":"Community","dateOfDeath":"26 March 2023","status":5}] %}
{% extends "layouts/main.html" %}

{% block pageTitle %}
Patient data
{% endblock %}

{% block content %}

<div class="govuk-grid-row">

  <div class="govuk-grid-column-two-thirds govuk-!-margin-top-8">

    <div class="govuk-form-group">
      <h1 class="govuk-label-wrapper">
        <label class="govuk-label govuk-label--l" for="patient-data">
          Patient data
        </label>
      </h1>
      <div id="patient-data-hint" class="govuk-hint">
        Information stored in the variable "data", passed to the page <a href="nunjucks-dashboard">nunjucks dashboard</a>.
      </div>
      <textarea class="govuk-textarea" id="patient-data" name="moreDetail" rows="5" aria-describedby="patient-data-hint">{{ data | dump }}</textarea>
    </div>

  </div>

</div>


<script>



  document.addEventListener('DOMContentLoaded', function () {

    const statuses = ['For officer review','To be amended','Amended','For sign off by medical examiner','Review complete - send to registrar','Sent to registrar'];

    const textArea = document.querySelector('#patient-data');
    const json = JSON.parse(textArea.innerHTML);

    const _generateNHSNumber = function () {

      let randomNumber = Math.floor(Math.random() * 10000000000);
      let numberString = randomNumber.toString();
      numberString = numberString.slice(0, 3) + ' ' + numberString.slice(3, 6) + ' ' + numberString.slice(6);

      return numberString;
    }

    // Update the data
    json.forEach(function (row) {

      var currentDates = ['29 March 2023', '28 March 2023', '27 March 2023', '26 March 2023'];

      row.nhsNo = _generateNHSNumber();
      row.status = Math.round(Math.random()*5); // Should generate a random number between 0-5
      row.dateOfDeath = currentDates[Math.round(Math.random()*(currentDates.length-1))];

      delete row.statuses;
      delete row.actions;

    });

    textArea.innerHTML = JSON.stringify(json);

  });
</script>


{% endblock %}