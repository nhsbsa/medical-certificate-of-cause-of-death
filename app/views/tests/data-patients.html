{% set data = [{"id":"0001","name":"Aaliyah Farah Abbas","nhsNo":"846 406 8028","placeOfDeath":"Community","dateOfDeath":"26 February 2023","status":"For sign off by medical examiner"},{"id":"0002","name":"Adrian Dickson","nhsNo":"750 171 8566","placeOfDeath":"Community<br>ME cert","dateOfDeath":"28 February 2023","status":"For officer review"},{"id":"0003","name":"Amelia Brown","nhsNo":"200 255 5695","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0004","name":"Andrea Bartlett","nhsNo":"551 595 3427","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0005","name":"Andrea Bishop","nhsNo":"615 201 1733","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"For sign off by medical examiner"},{"id":"0006","name":"Angel Hewitt","nhsNo":"601 123 4143","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"For sign off by medical examiner"},{"id":"0007","name":"Armaan Chang","nhsNo":"174 015 5200","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"For sign off by medical examiner"},{"id":"0008","name":"Brogan Hali Bowers","nhsNo":"899 282 424","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"Review complete - send to registrar"},{"id":"0009","name":"Caleb Greenaway","nhsNo":"973 670 8787","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0010","name":"Charley Angeli Frost","nhsNo":"205 717 4114","placeOfDeath":"Community","dateOfDeath":"29 February 2023","status":"Amended"},{"id":"0011","name":"Charlie Endo Tran","nhsNo":"832 652 9945","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0012","name":"Cian Yates","nhsNo":"677 952 465","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0013","name":"Darcey Rowe","nhsNo":"960 442 7955","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"Amended"},{"id":"0014","name":"Devon Barlow","nhsNo":"188 370 6560","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"Review complete - send to registrar"},{"id":"0015","name":"Dillan Jhorrad Khan","nhsNo":"165 050 5236","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"Review complete - send to registrar"},{"id":"0016","name":"Dillon Norman","nhsNo":"138 996 5988","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"Review complete - send to registrar"},{"id":"0017","name":"Ebony Austin","nhsNo":"178 696 0798","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"For sign off by medical examiner"},{"id":"0018","name":"Elena Domenica Hunt","nhsNo":"743 961 5129","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0019","name":"Erik Hendin","nhsNo":"268 800 4917","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0020","name":"Erin Potts","nhsNo":"239 596 1060","placeOfDeath":"Community","dateOfDeath":"26 February 2023","status":"For sign off by medical examiner"},{"id":"0021","name":"Faith Wiggins","nhsNo":"385 609 6410","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"Sent to registrar"},{"id":"0022","name":"Felix Ashley Ware","nhsNo":"757 093 2699","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0023","name":"Harris Bowman","nhsNo":"799 209 7642","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"For officer review"},{"id":"0024","name":"Idris Felba","nhsNo":"362 885 7821","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"For officer review"},{"id":"0025","name":"Jenna Kirk","nhsNo":"687 393 1675","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"To be amended"},{"id":"0026","name":"Jerry Sherman","nhsNo":"360 070 3819","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"For sign off by medical examiner"},{"id":"0027","name":"Jordan Carrillo","nhsNo":"391 340 5454","placeOfDeath":"Community","dateOfDeath":"29 February 2023","status":"Review complete - send to registrar"},{"id":"0028","name":"Joseph William Doyle","nhsNo":"798 546 8036","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0029","name":"Jude Perry","nhsNo":"180 957 3940","placeOfDeath":"Community","dateOfDeath":"29 February 2023","status":"Review complete - send to registrar"},{"id":"0030","name":"Julia Graham","nhsNo":"707 805 5699","placeOfDeath":"Community","dateOfDeath":"26 February 2023","status":"For officer review"},{"id":"0031","name":"Kaya Hoffman","nhsNo":"388 569 6650","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0032","name":"Kia Ravi","nhsNo":"196 626 8726","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"For sign off by medical examiner"},{"id":"0033","name":"Kristen Chandler","nhsNo":"579 590 6085","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"For sign off by medical examiner"},{"id":"0034","name":"Kyan Mcguire","nhsNo":"393 958 2999","placeOfDeath":"Community","dateOfDeath":"29 February 2023","status":"Amended"},{"id":"0035","name":"Lachlan Rosario","nhsNo":"587 334 0292","placeOfDeath":"Community","dateOfDeath":"26 February 2023","status":"Review complete - send to registrar"},{"id":"0036","name":"Laurie Boyd","nhsNo":"411 091 3661","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0037","name":"Lea Donna Durham","nhsNo":"115 875 3184","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"Amended"},{"id":"0038","name":"Louie O'Quinn","nhsNo":"208 169 503","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"Amended"},{"id":"0039","name":"Mackenzie Howard","nhsNo":"934 922 4510","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"To be amended"},{"id":"0040","name":"Maddison Juarez","nhsNo":"578 148 9099","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"To be amended"},{"id":"0041","name":"Mae Alexander","nhsNo":"639 541 2388","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"For sign off by medical examiner"},{"id":"0042","name":"Malik Sloan","nhsNo":"677 301 0933","placeOfDeath":"Community","dateOfDeath":"26 February 2023","status":"Amended"},{"id":"0043","name":"Marissa Guerrero","nhsNo":"524 482 5176","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"Review complete - send to registrar"},{"id":"0044","name":"Marley Myers","nhsNo":"207 891 6485","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"For sign off by medical examiner"},{"id":"0045","name":"Mika Low","nhsNo":"139 255 812","placeOfDeath":"Community","dateOfDeath":"26 February 2023","status":"To be amended"},{"id":"0046","name":"Milo Brett","nhsNo":"704 150 3520","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0047","name":"Mina Wu","nhsNo":"423 973 7572","placeOfDeath":"Community","dateOfDeath":"29 February 2023","status":"Amended"},{"id":"0048","name":"Minato Semaj","nhsNo":"619 821 2803","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"Review complete - send to registrar"},{"id":"0049","name":"Molly Knowles","nhsNo":"294 250 9765","placeOfDeath":"Community","dateOfDeath":"29 February 2023","status":"Amended"},{"id":"0050","name":"Myra Jari Adkins","nhsNo":"270 563 5027","placeOfDeath":"Community","dateOfDeath":"29 February 2023","status":"Review complete - send to registrar"},{"id":"0051","name":"Nana Bullock","nhsNo":"682 837 0661","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"To be amended"},{"id":"0052","name":"Pearl Small","nhsNo":"776 386 0395","placeOfDeath":"Community","dateOfDeath":"29 February 2023","status":"Sent to registrar"},{"id":"0053","name":"Riley James","nhsNo":"531 931 0741","placeOfDeath":"Community","dateOfDeath":"27 February 2023","status":"For sign off by medical examiner"},{"id":"0054","name":"Rory Vaughn","nhsNo":"553 884 539","placeOfDeath":"Community","dateOfDeath":"29 February 2023","status":"Amended"},{"id":"0055","name":"Sasha Castro","nhsNo":"606 624 3406","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"To be amended"},{"id":"0056","name":"Shannon Ferrell","nhsNo":"671 118 3340","placeOfDeath":"Community","dateOfDeath":"28 February 2023","status":"For sign off by medical examiner"},{"id":"0057","name":"Sienna Mcdonald","nhsNo":"224 700 5260","placeOfDeath":"Community","dateOfDeath":"29 February 2023","status":"To be amended"},{"id":"0058","name":"Taylor Marshall","nhsNo":"403 047 845","placeOfDeath":"Community","dateOfDeath":"26 February 2023","status":"Review complete - send to registrar"},{"id":"0059","name":"Verity Duncann","nhsNo":"604 744 9875","placeOfDeath":"Community","dateOfDeath":"26 February 2023","status":"For officer review"}] %}

{% extends "layouts/main.html" %}

{% block pageTitle %}
Patient data
{% endblock %}

{% block content %}

<div class="govuk-grid-row">

  <div class="govuk-grid-column-two-thirds govuk-!-margin-top-8">

    <div class="govuk-form-group">
      <h1 class="govuk-label-wrapper">
        <label class="govuk-label govuk-label--l" for="patient-data">
          Patient data
        </label>
      </h1>
      <div id="patient-data-hint" class="govuk-hint">
        Information stored in the variable "data", passed to the page <a href="nunjucks-dashboard">nunjucks dashboard</a>.
      </div>
      <textarea class="govuk-textarea" id="patient-data" name="moreDetail" rows="5" aria-describedby="patient-data-hint">{{ data | dump }}</textarea>
    </div>

  </div>

</div>


<script>



  document.addEventListener('DOMContentLoaded', function () {

    const statuses = ['For officer review','To be amended','Amended','For sign off by medical examiner','Review complete - send to registrar','Sent to registrar'];

    const textArea = document.querySelector('#patient-data');
    const json = JSON.parse(textArea.innerHTML);

    const _generateNHSNumber = function () {

      let randomNumber = Math.floor(Math.random() * 10000000000);
      let numberString = randomNumber.toString();
      numberString = numberString.slice(0, 3) + ' ' + numberString.slice(3, 6) + ' ' + numberString.slice(6);

      return numberString;
    }

    // Update the data
    json.forEach(function (row) {

      var currentDates = ['29 February 2023', '28 February 2023', '27 February 2023', '26 February 2023'];

      row.nhsNo = _generateNHSNumber();
      row.status = statuses[Math.round(Math.random()*(statuses.length-1))];
      row.dateOfDeath = currentDates[Math.round(Math.random()*(currentDates.length-1))];

      delete row.statuses;
      delete row.actions;

    });

    textArea.innerHTML = JSON.stringify(json);

  });
</script>


{% endblock %}